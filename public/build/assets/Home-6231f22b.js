import{r as n,j as e,F as g,c as N,H as y,R as f,a as v,C as S,D as w,E as C,S as k}from"./axios-ac480417.js";const i=n.createContext();const P=({children:t})=>{const[r,s]=n.useState([]),[x,m]=n.useState([]),d=async()=>{const a=await g.get("/api/coins");return s(a.data.data),a.data.data};n.useEffect(()=>{d()},[]);const h=async a=>{const c=new WebSocket("wss://stream.binance.com:9443/stream?streams="+a.map(l=>`${l.name}@ticker`).join("/"));return c.onopen=()=>{console.log("WebSocket connection opened")},c.onmessage=l=>{const o=JSON.parse(l.data),j=o.data.s,u=o.data.c,p=o.data.P;m(b=>({...b,[j]:{price:u,percentage:p}}))},c.onclose=()=>{console.log("WebSocket connection closed")},()=>{c.close()}};return n.useEffect(()=>{d().then(a=>{a.length>0&&h(a)})},[]),e.jsx(i.Provider,{value:{coins:r,prices:x},children:t})},R=()=>e.jsx(e.Fragment,{children:e.jsx(P,{children:e.jsx(y,{children:e.jsx(f,{children:e.jsx(v,{path:"/",element:e.jsx(F,{})})})})})});N(document.getElementById("root")).render(e.jsx(R,{}));const E=({prices:t,coins:r})=>e.jsx("div",{className:"container",children:JSON.stringify(t)=="[]"?e.jsx(S,{}):e.jsxs("table",{className:"table w-100 market-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"translate",children:" Pair "}),e.jsx("th",{className:"translate text-center",children:" Price "}),e.jsx("th",{className:"text-end translate",children:" Change "})]})}),e.jsx("tbody",{children:r.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"d-flex align-items-center w-100",children:[e.jsx("img",{src:s.icon,width:30,height:30,alt:s.name}),e.jsxs("div",{className:"d-flex flex-column  ms-3",children:[e.jsx("div",{children:e.jsx("a",{href:`/trade/#/trade/${s.symbol}`,className:"text-decoration-none",children:w(s.symbol)})}),e.jsx("div",{children:e.jsxs("small",{children:[" ",s.full_name," "]})})]})]})}),e.jsx("td",{className:"py-2 text-center",children:t[s.symbol]?e.jsx(e.Fragment,{children:e.jsxs("p",{className:"mt-3",children:[C(t[s.symbol].price)," "]})}):e.jsx("div",{className:"text-center",children:e.jsx(k,{width:"100%"})})}),e.jsx("td",{className:"text-end py-2",children:e.jsx("div",{className:"mt-3",children:e.jsx("small",{className:t[s.symbol]&&parseFloat(t[s.symbol].percentage)>0?"text-success bg-success rounded text-white p-2":"text-danger bg-danger rounded p-2 text-white",children:t[s.symbol]?`${parseFloat(t[s.symbol].percentage)}%`:"N/A"})})})]},s.id))})]})}),F=()=>{const{coins:t,prices:r}=n.useContext(i);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"pt-5",children:e.jsx(E,{prices:r,coins:t})})})};export{P as C,F as H,E as M,i as a};
